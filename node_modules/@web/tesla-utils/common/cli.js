/**
 * Simple cli helpers
 *
 * @type {Object}
 */
module.exports = {

    /**
     * Returns arg value if it exists (if arg is a flag, returns true/false)
     *
     * USAGE:
     *    $ myScript --myFlag --- cli.getArg('myFlag') // returns 'true'
     *    $ myScript --myFlag=myValue -- cli.getArg('myFlag') // returns 'myValue'
     *
     * @param  {String} argName -- name of arg to get
     * @param  {Array} argv    [Array of process args]
     * @return {Any}
     */
    getArg: function(argName, argv, opts){

        if(arguments.length === 1 || argv === null){
            argv = process.argv.slice(2);
        }

        for(var i = 0; i < argv.length; i++){

            var val = argv[i];

            if(val.indexOf(argName) > -1){

                var valuePair   = val.split("=");
                var isValuePair = valuePair.length === 2;

                if(isValuePair){

                    valuePair[1] = valuePair[1].trim();

                    if(!isNaN(parseFloat(valuePair[1]))){
                        return parseFloat(valuePair[1]);
                    }

                    return valuePair[1];
                }

                // arg flag match, return true
                return true;
            }
        }

        if(opts && opts.returnNullWhenEmpty){
            return null;
        }

        // no arg match, return false
        return false;

    }
}
