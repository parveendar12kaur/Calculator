
/**
 * requestAnimationFrame shim
 * 
 * @see https://gist.github.com/paulirish/1579671
 */

module.exports = (function(){

	var lastTime = 0;

    if(window !== undefined){

    	if(!window.requestAnimationFrame){

	        window.requestAnimationFrame = (function() {

	            return window.webkitRequestAnimationFrame ||
	                window.mozRequestAnimationFrame       ||
					function(callback, element) {
                        var currTime = new Date().getTime();
                        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
                        var id = window.setTimeout(function() { 
                        	callback(currTime + timeToCall); 
                        }, timeToCall);
                        lastTime = currTime + timeToCall;
                        return id;
                };

	        })();
    	}

    	if(!window.cancelAnimationFrame){
    		
	        window.cancelAnimationFrame = (function() {
	            return window.webkitCancelAnimationFrame     ||
	                window.webkitCancelRequestAnimationFrame ||
	                window.mozCancelAnimationFrame           ||
	                function(id) {
	                    clearTimeout(id);
	                };
	        })();
    	}
    }

}())

