import 'babel-polyfill'
import _ from 'lodash'
import React from 'react'
import { render } from 'react-dom'
import { Provider } from 'react-redux'
import Main from './containers/Main'
import { composeWithDevTools } from 'redux-devtools-extension';
import {reducerRegistry} from 'globals'

import epics from './epics'
import reducers, {InitialState} from './reducers'
import {APP_NAME} from 'dictionary'

// import styles
import './styles/index.scss'

const initialState = {
	[`${APP_NAME}/App`]: {
		env: _.get(window, 'tesla.env')
	}
}

reducerRegistry.register({id:APP_NAME, reducer: reducers, epics, initialState}, () => {
	const store = reducerRegistry.getStore()
	render(
	    <Provider store={store}>
	        <Main />
	    </Provider>,
	    document.getElementById('configurator')
	)
})