:root {
  --tsla-carousel-transition_property: all;
  --tsla-carousel-transition_duration: 500ms;
  --tsla-carousel-transition_delay: 200ms;
  --tsla-carousel-transition_function: ease;
  --tsla-carousel-item-border_width: 3px;
  --tsla-carousel-item-border_style: solid;
  --tsla-carousel-item-border_color: var(--tsla-color--grey_3);
  --tsla-carousel-item_width: calc(var(--tsla-base-spacer) * 24);
  --tsla-carousel-container_width: 1260px;
  --tsla-carousel-slide: 0;
  --tsla-carousel-dotnav-position_left: 0;
  --tsla-carousel-dotnav-position_top: 0;
  --tsla-carousel-dot_size: 10px;
  --tsla-carousel-dot_border: var(--tsla-carousel-item-border_width);
  --tsla-carousel-padding_top: calc((var(--tsla-base-spacer) * 3));
  --tsla-carousel-padding_right: var(--tsla-carousel-padding_top);
  --tsla-carousel-padding_bottom: var(--tsla-carousel-padding_top);
  --tsla-carousel-padding_left: var(--tsla-carousel-padding_top);
  --tsla-carousel-boxleft: 0;
}

.tsla-carousel-container {
  display: flex;
  flex-flow: row wrap;
  margin-left: auto;
  margin-right: auto;
  padding-top: calc(var(--tsla-base-spacer) * 6);
  padding-bottom: calc(var(--tsla-base-spacer) * 6);
  max-width: var(--tsla-carousel-container_width);
}

/* --- Carousel Header
---------------------------------------------------------------- */

.tsla-carousel-header {
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding-right: calc(var(--tsla-base-spacer) * 3);
  width: calc(49% - var(--tsla-base-spacer));
}

@media (max-width: 839px) {
  .tsla-carousel-header {
    order: 1;
    width: 100%;
  }
}

.tsla-carousel-hed {
  color: var(--tsla-color--grey_3);
  margin-bottom: 0;
}

/* --- Carousel Navigation
---------------------------------------------------------------- */

.tsla-carousel-navigation {
  padding: calc(var(--tsla-base-spacer) * 3) 0;
}

@media (max-width: 839px) {
  .tsla-carousel-navigation {
    order: 3;
  }
}

.tsla-carousel-items {
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
  align-content: center;
  flex-flow: row nowrap;
  position: relative;
}

.tsla-carousel-item {
  margin-left: calc(var(--tsla-base-spacer) * 3);
  opacity: .5;
  padding: var(--tsla-carousel-padding_top) var(--tsla-carousel-padding_right) var(--tsla-carousel-padding_bottom) var(--tsla-carousel-padding_left);
  cursor: pointer;
  width: var(--tsla-carousel-item_width);
  -webkit-tap-highlight-color: transparent;
  position: relative;
  transition: transform var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function), left var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
}

@media (max-width: 839px) {
  .tsla-carousel-item {
    --tsla-carousel-item_width: calc(var(--tsla-base-spacer) * 20);

    padding: calc(var(--tsla-base-spacer) * 2) calc(var(--tsla-base-spacer) * 2) 0;
  }
}

@media (min-width: 1199px) {
  .tsla-carousel-item {
    width: var(--tsla-carousel-item_width);
  }
}

@supports (--foo: bar) {
  .tsla-carousel--boxnav .tsla-carousel-items::before {
    --tsla-carousel-transition_property: transform;

    display: block;
    position: absolute;
    top: 0;
    content: '';
    width: var(--tsla-carousel-item_width);
    height: calc(100% - var(--tsla-carousel-item-border_width));
    border: var(--tsla-carousel-item-border_width) var(--tsla-carousel-item-border_style) var(--tsla-carousel-item-border_color);
    transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
  }

  @media (max-width: 839px) {
    .tsla-carousel--boxnav .tsla-carousel-items {
      --tsla-carousel-item_width: calc(var(--tsla-base-spacer) * 10);
      --tsla-carousel-transition_property: transform;

      transform: translateX(calc(var(--tsla-carousel-slide) * (var(--tsla-carousel-item_width) + (var(--tsla-base-spacer) * 3)) * -1)) translateZ(0);
      transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
    }

    .tsla-carousel--boxnav .tsla-carousel-items::before {
      --tsla-carousel-item_width: calc((var(--tsla-base-spacer) * 20) - (var(--tsla-carousel-item-border_width) * 2));

      left: var(--tsla-carousel-boxleft) / 2;
      transform: translateX(calc(var(--tsla-carousel-slide) * (160px + (8px * 3)))) translateZ(0);
    }
  }

  @media (min-width: 840px) {
    .tsla-carousel--boxnav .tsla-carousel-items::before {
      left: var(--tsla-boxnav_position--left);
      transform: translateX(calc(var(--tsla-carousel-slide) * (var(--tsla-carousel-item_width) + (var(--tsla-base-spacer) * 3)))) translateZ(0);
    }
  }

  .tsla-carousel-item {
    border-top: var(--tsla-carousel-item-border_width) var(--tsla-carousel-item-border_style) var(--tsla-carousel-item-border_color);
  }

  .tsla-carousel-item::before {
    display: none;
  }
}

.tsla-carousel-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: calc(100% - (var(--tsla-carousel-item-border_width) * 2));
  border-top: var(--tsla-carousel-item-border_width) var(--tsla-carousel-item-border_style) var(--tsla-carousel-item-border_color);
}

.tsla-carousel-item:first-child {
  margin-left: 0;
}

.tsla-carousel-item.tsla-carousel-item--active {
  cursor: default;
}

.tsla-carousel-item.tsla-carousel-item--active::before {
  border: var(--tsla-carousel-item-border_width) var(--tsla-carousel-item-border_style) var(--tsla-carousel-item-border_color);
}

.tsla-carousel-item--hed {
  margin-top: 0;
}

.tsla-carousel-item--dek {
  margin-bottom: 0;
}

/* --- Carousel Assets
---------------------------------------------------------------- */

.tsla-carousel-assets {
  position: relative;
  max-width: 100%;
  margin-left: auto;
  margin-right: auto;
}

@media (max-width: 839px) {
  .tsla-carousel-assets {
    order: 2;
  }
}

.tsla-carousel-asset {
  --tsla-carousel-transition_property: opacity;

  position: absolute;
  top: 0;
  display: block;
  z-index: 0;
  opacity: 0;
  width: 100%;
  max-width: 100%;
  transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
}

.tsla-carousel-asset.tsla-carousel-asset--active {
  position: static;
}

/* --- Carousel Animations
---------------------------------------------------------------- */

.tsla-carousel-item--active,
.tsla-carousel-asset--active {
  --tsla-carousel-transition_property: opacity;

  transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
  z-index: 1;
  opacity: 1;
}

/* --- Carousel Variations
---------------------------------------------------------------- */

/* Variation 1 */

.tsla-carousel--stacked .tsla-carousel-header {
  order: 1;
}

.tsla-carousel--stacked .tsla-carousel-assets {
  order: 2;
}

.tsla-carousel--stacked .tsla-carousel-navigation {
  order: 3;
  margin-left: auto;
  margin-right: auto;
}

/* Variation 2 */

.tsla-carousel--inline {
  flex-flow: row wrap;
  justify-content: center;
}

.tsla-carousel--inline .tsla-carousel-header {
  max-width: 400px;
}

@media (min-width: 840px) {
  .tsla-carousel--inline .tsla-carousel-header {
    padding-right: calc(var(--tsla-base-spacer) * 5);
  }
}

.tsla-carousel--inline .tsla-carousel-assets {
  flex-grow: 2;
}

/* Variation 3 */

.tsla-carousel--autorotate .tsla-carousel-assets {
  flex-grow: 1;
  order: -1;
  max-width: calc(66.6667% - 50px);
}

.tsla-carousel--autorotate .tsla-carousel-navigation {
  flex-grow: 1;
  max-width: 33.3333%;
}

.tsla-carousel--autorotate .tsla-carousel-item--active .tsla-carousel-item--hed,
.tsla-carousel--autorotate .tsla-carousel-item--active .tsla-carousel-item--dek {
  --tsla-carousel-transition_property: opacity;

  transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
  opacity: 1;
}

/* Variation with dotnav */

.tsla-carousel--dotnav {
  justify-content: space-between;
  align-content: center;
  align-items: flex-start;
}

@media (max-width: 839px) {
  .tsla-carousel--dotnav {
    flex-flow: column nowrap;
  }

  .tsla-carousel--dotnav .tsla-carousel-assets,
  .tsla-carousel--dotnav .tsla-carousel-navigation,
  .tsla-carousel--dotnav .tsla-carousel-items,
  .tsla-carousel--dotnav .tsla-carousel-item {
    width: 100%;
    max-width: 100%;
  }
}

.tsla-carousel--dotnav .tsla-carousel-item {
  --tsla-carousel-item_width: 100%;

  border-top: 0;
  position: absolute;
  top: 0;
  left: 0;
  margin-left: 0;
}

.tsla-carousel--dotnav .tsla-carousel-item--hed,
.tsla-carousel--dotnav .tsla-carousel-item--dek {
  --tsla-carousel-transition_property: opacity;

  transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
  opacity: 0;
}

.tsla-carousel--dotnav .tsla-carousel-item::after {
  --tsla-carousel-transition_property: background-color;

  display: block;
  width: calc(var(--tsla-carousel-dot_size) - var(--tsla-carousel-dot_border));
  height: calc(var(--tsla-carousel-dot_size) - var(--tsla-carousel-dot_border));
  position: absolute;
  top: 0;
  left: var(--tsla-carousel-dotnav-position_left);
  content: '';
  border-radius: var(--tsla-carousel-dot_size);
  border: var(--tsla-carousel-dot_border) solid var(--tsla-color--grey_3);
  background-color: transparent;
  cursor: pointer;
  transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
}

.tsla-carousel--dotnav .tsla-carousel-item--active {
  position: static;
}

.tsla-carousel--dotnav .tsla-carousel-item--active .tsla-carousel-item--hed,
.tsla-carousel--dotnav .tsla-carousel-item--active .tsla-carousel-item--dek {
  --tsla-carousel-transition_property: opacity;

  transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
  opacity: 1;
}

.tsla-carousel--dotnav .tsla-carousel-item--active::after {
  --tsla-carousel-transition_property: background-color;

  cursor: default;
  left: var(--tsla-carousel-dotnav-position_left);
  background-color: var(--tsla-color--grey_3);
  transition: var(--tsla-carousel-transition_property) var(--tsla-carousel-transition_duration) var(--tsla-carousel-transition_delay) var(--tsla-carousel-transition_function);
}

/* Variation 4 */

.tsla-carousel-dotnav--alt {
  flex-flow: column wrap;
}

.tsla-carousel-dotnav--alt .tsla-carousel-assets {
  order: -1;
}

.tsla-carousel-dotnav--alt .tsla-carousel-items {
  width: 100%;
}

.tsla-carousel-dotnav--alt .tsla-carousel-item {
  --tsla-carousel-padding_right: 0;
  --tsla-carousel-padding_bottom: 0;
  --tsla-carousel-padding_left: 0;
}

.tsla-carousel-dotnav--alt .tsla-carousel-item::after,
.tsla-carousel-dotnav--alt .tsla-carousel-item--active::after {
  left: initial;
  right: var(--tsla-carousel-dotnav-position_left);
}

@media (max-width: 639px) {
  .tsla-carousel-dotnav--alt .tsla-carousel-item::after {
    --carousel-dotnav-top_position: calc(var(--tsla-base-spacer) * 3);
  }
}

.tsla-carousel-arrows {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  align-content: center;
  justify-content: space-between;
}

.tsla-carousel-arrow {
  border: 1px solid #000;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
  user-select: none;
}

.tsla-carousel-arrow:first-child {
  left: -70px;
}

.tsla-carousel-arrow:last-child {
  right: -70px;
}

