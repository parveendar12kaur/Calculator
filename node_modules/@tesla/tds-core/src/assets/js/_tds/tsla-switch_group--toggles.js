const element = document.querySelector('.tsla-switch_group');
const radios = document.querySelectorAll('.tsla-switch_group--option');
const labels = document.querySelectorAll('.tsla-switch_group .tsla-label');
const slider = document.querySelector('.tsla-switch_group--slider');
let offsetWidth;

if (element && labels && labels.length > 0) {
  offsetWidth = 100 / parseInt(labels.length, 10);

  slider.style.setProperty('--tsla-switch_group-slider-label-width', `${offsetWidth}%`);
  let i = 0;
  for (i; i < labels.length; i++) {
    labels[i].style.setProperty('--tsla-switch_group-slider-label-width', `${offsetWidth}%`);
  }
}

function activateSlider() {
  let count = 0;
  let i = 0;

  for (i; i < radios.length; i++) {
    if (radios[i].checked) {
      break;
    }
    count += 1;
  }

  const newOffset = offsetWidth * count;
  slider.style.setProperty('--tsla-switch_group-slider-position', `${newOffset}%`);
}

let j = 0;
for (j; j < radios.length; j++) {
  radios[j].addEventListener('click', () => {
    activateSlider();
  });
}

activateSlider();
